#!/bin/sh

clientID=c79f52fb8ecd14f65a3e
clientSecret=f62012f87a0308d350b12808ad0c651eb02f620d
apiEndpoint="https://api.github.com/repos/toddmohney/sequentializer/pulls"
newBranchName=$1

echo "checking out branch: $newBranchName"
git checkout -b $newBranchName

echo "create some test file"
touch testFile

#-----------------------------------
echo "make a change"
echo "I'm a change!" > testFile

echo "commit that change"
git add .
git commit -m "I made a change"

#-----------------------------------
echo "make another change"
echo "I'm another change!" > testFile

echo "commit that change"
git add .
git commit -m "I made 2nd change"

#-----------------------------------
echo "make a third change"
echo "I'm third change!" > testFile

echo "commit that change"
git add .
git commit -m "I made 3rd change"

#-----------------------------------
echo "push those changes!"
git push

#-----------------------------------
echo "create a pull request"
curl -i -vvv \
  -H "Content-Type: application/json" \
  -H "Authorization: token a5f74288ff0fcc37ce4febae2c7e7094918a8b7a" \
  -X POST -d '{ "title": "Amazing new feature", "body": "Please pull this in!", "head": "sequentializer:$newBranchName", "base": "master" }' \
  $apiEndpoint

